extends layout

block content
  h1 $$$Gross... Movies

  table(id="movie-table" class="display")
    thead
      tr
        th movie_title
        th studio
        th year
        th box_office
        th picture
    tfoot
      tr
        th movie_title
        th studio
        th year
        th box_office
        th picture


  
  script(src='https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js')
  script(src='https://cdn.datatables.net/v/bs-3.3.6/jq-2.2.3/dt-1.10.12/datatables.min.js')

  script.
    $(document).ready(function() {
      $('#movie-table').DataTable( {
          "ajax": '/movies/api/json',
          "columns": [
            { "data": "movie_title" },
            { "data": "studio" },
            { "data": "year" },
            { "data": "box_office" },
            { "data": "picture" }],
          "lengthMenu": [[5, 10, 20, -1], [5, 10, 20, "All"]],
          "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {
            var imgLink = aData['picture']; // if your JSON is 3D
            // var imgLink = aData[4]; // where 4 is the zero-origin column for 2D

            var imgTag = '<img src="/' + imgLink + '"/>';
            $('td:eq(4)', nRow).html(imgTag); // where 4 is the zero-origin visible column in the HTML

            return nRow;
          }


      } );
    } );